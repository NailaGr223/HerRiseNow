{% extends 'base.html' %}
{% load static %}
{% block styles %}

  <style>
    :root {
      --primary: #d946ef;
      --secondary: #8b5cf6;
      --accent: #ec4899;
      --dark: #1a1a2e;
    }
    body {
      background: linear-gradient(135deg, #e0c3fc, #c8b5ff);
      min-height: 100vh;
      font-family: 'Roboto', sans-serif;
    }
    .form-card {
      background: white;
      border-radius: 32px;
      box-shadow: 0 30px 80px rgba(0,0,0,0.18);
      max-width: 680px;
      margin: 2.5rem auto;
      overflow: hidden;
    }
    .form-header {
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      color: white;
      padding: 4rem 2rem;
      text-align: center;
    }
    .text-gradient {
      background: linear-gradient(90deg, #ffffff, #f0d6ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .form-body { padding: 3.5rem 3rem; }
    .btn-submit {
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      border: none;
      padding: 1.1rem 3.5rem;
      font-size: 1.3rem;
      font-weight: 600;
      border-radius: 50px;
      transition: all 0.3s ease;
      box-shadow: 0 12px 35px rgba(139, 92, 246, 0.35);
    }
    .btn-submit:hover {
      transform: translateY(-6px);
      box-shadow: 0 22px 50px rgba(139, 92, 246, 0.5);
    }
    .mentor-option {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px;
    }
    .mentor-img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--primary);
    }
    .highlight-box {
      background: #f8f0ff;
      border-left: 5px solid var(--primary);
      padding: 1.2rem 1.5rem;
      border-radius: 0 16px 16px 0;
      font-size: 0.98rem;
    }
  </style>
{% endblock %}


{% block content %}
  <div class="container py-5">
    <div class="form-card">

      <!-- Header -->
      <div class="form-header">
        <i class="bi bi-trophy-fill fs-1 mb-4"></i>
        <h1 class="display-5 fw-bold text-gradient">Apply for Career Mentorship</h1>
        <p class="lead opacity-90 mb-0">
          Choose your mentor & take the next step in your career
        </p>
      </div>

      <!-- Form Body -->
      <div class="form-body">

        <form action="{% url 'submitcareermentorshipform' %}" method="POST">
         {% csrf_token %}
          <input type="hidden" name="form_type" value="Career Mentorship">
          <input type="hidden" name="_next" value="{% url 'mentorship' %}">
    

          <!-- Full Name -->
          <div class="mb-4">
            <label class="form-label fw-bold">Full Name <span class="text-danger">*</span></label>
            <input type="text" name="entry.123456789" class="form-control form-control-lg" placeholder="e.g. Fatuma Ali" required>
          </div>

          <!-- Email -->
          <div class="mb-4">
            <label class="form-label fw-bold">Email Address <span class="text-danger">*</span></label>
            <input type="email" name="entry.987654321" class="form-control form-control-lg" placeholder="fatuma@example.com" required>
          </div>

          <!-- Phone -->
          <div class="mb-4">
            <label class="form-label fw-bold">Phone (WhatsApp preferred) <span class="text-danger">*</span></label>
            <input type="tel" name="entry.112233445" class="form-control form-control-lg" placeholder="+254 712 345 678" required>
          </div>

          <!-- CHOOSE YOUR MENTOR -->
          <div class="mb-4">
            <label class="form-label fw-bold">Choose Your Preferred Mentor <span class="text-danger">*</span></label>
            <select name="entry.556677889" class="form-select form-select-lg" required>
              <option value="" disabled selected>Select a mentor who inspires you</option>
              
              <option data-img="{% static 'img/Iman.jpeg' %}" value="Ms.Iman">
                Ms.Iman Abdulhakim – Commissioner of Oaths, Khalid Salim and Company Advocates
              </option>
              <option data-img="{% static 'img/Amal.jpeg' %}" value="Ms.Amal">
                Ms.Amal Abdulhakim – Associate Advocate, Khalid Salim and Company Advocates
              </option>
              <option data-img="{% static 'img/Rahma.jpeg' %}" value="Ms.Rahma">
                Ms.Rahma Ebrahim - Co-Founder, Red Carpet Salon
              </option>
              <option data-img="{% static 'img/Fatma.jpeg' %}" value="Ms.Fatma">
                Ms. Fatma Abdulmajid – Co-Founder, Red Carpet Salon
              </option>
              <option value="No preference – match me with the best fit">
                No preference – match me with the best mentor for my goals
              </option>
            </select>
          </div>

          <!-- Current Career Stage -->
          <div class="mb-4">
            <label class="form-label fw-bold">Current Career Stage <span class="text-danger">*</span></label>
            <select name="entry.998877665" class="form-select form-select-lg" required>
              <option value="" disabled selected>Where are you now?</option>
              <option>Student</option>
              <option>Recent Graduate</option>
              <option>Early Career (0–3 years)</option>
              <option>Mid-Career (3–10 years)</option>
              <option>Experienced Professional</option>
              <option>Entrepreneur</option>
              <option>Career Transition</option>
              <option>Other</option>
            </select>
          </div>

          <!-- Your Top 3 Goals -->
          <div class="mb-4">
            <label class="form-label fw-bold">Your Top 3 Career Goals <span class="text-danger">*</span></label>
            <textarea name="entry.443322110" class="form-control form-control-lg" rows="4" 
                      placeholder="1. Become a lead engineer&#10;2. Start my own company&#10;3. Get promoted to manager...&#10; feel free to add as many" required></textarea>
          </div>

          <!-- Anything Else -->
          <div class="mb-5">
            <label class="form-label fw-bold">Anything else we should know?</label>
            <textarea name="entry.667788990" class="form-control" rows="3" 
                      placeholder="Availability, challenges, mentor traits you value, etc."></textarea>
          </div>

          <!-- Highlight -->
          <div class="highlight-box mb-4 text-center">
            <strong>Limited spots per mentor</strong> — We’ll confirm your match within 7 days
          </div>

          <!-- Submit -->
          <div class="text-center">
            <button type="submit" class="btn btn-submit text-white fw-bold">
              Submit Application
            </button>
          </div>

          <p class="text-center text-muted mt-5 small">
            This program is <strong>100% free</strong> • Confidential • For women only
          </p>
        </form>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
  <script>
  // Redirect to mentorship.html after Google Form submission
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    
    form.addEventListener("submit", function (e) {
      // Show thank you message
      e.preventDefault(); // Stop normal submission temporarily
      
      // Optional: Show a nice thank you overlay
      const thankYou = `
        <div style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);color:white;display:flex;align-items:center;justify-content:center;z-index:9999;flex-direction:column;padding:2rem;text-align:center;">
          <i class="bi bi-heart-fill fs-1 text-accent mb-3" style="color:#ec4899;"></i>
          <h1 class="display-5 fw-bold">Thank You, Sister!</h1>
          <p class="lead">Your application has been submitted.<br>We’ll match you with your peer circle soon.</p>
          <p>Redirecting you back to Mentorship...</p>
        </div>
      `;
      document.body.insertAdjacentHTML('beforeend', thankYou);

      // Submit the form for real
      setTimeout(() => {
        form.submit();
      }, 800);

      // Redirect after 3 seconds (Google Forms finishes submitting)
      setTimeout(() => {
        window.location.href= "{% url 'mentorship' %}";
      }, 3000);
    });
  });
</script>
<script>
  // PERFECT redirect after Google Form submission
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");

    form.addEventListener("submit", function (e) {
      e.preventDefault(); // Stop normal submit

      // 1. Show beautiful thank you
      document.body.innerHTML = `
        <div style="min-height:100vh;background:linear-gradient(135deg,#fce7f3,#f0d6ff);display:flex;align-items:center;justify-content:center;flex-direction:column;gap:2rem;padding:2rem;text-align:center;">
          <i class="bi bi-heart-fill" style="font-size:4rem;color:#ec4899;"></i>
          <h1 class="display-4 fw-bold text-gradient" style="background:linear-gradient(90deg,#ec4899,#d946ef);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">
            Thank You, Sister!
          </h1>
          <p class="lead">Your application was submitted successfully.</p>
          <p>Redirecting you back to Mentorship in <span id="countdown">3</span> seconds...</p>
        </div>
      `;

      // 2. Submit the real form (in background)
      const formData = new FormData(form);
      fetch(form.action, {
        method: "POST",
        body: formData,
        mode: "no-cors"  // Important for Google Forms
      });

      // 3. Countdown + redirect
      let seconds = 3;
      const countdown = setInterval(() => {
        seconds--;
        document.getElementById("countdown").textContent = seconds;
        if (seconds <= 0) {
          clearInterval(countdown);
          window.location.href = "{% url 'mentorship' %}";  // This WILL work now
        }
      }, 1000);
    });
  });
</script>
{% endblock %}
